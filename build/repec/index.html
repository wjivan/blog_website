<!doctype html>
<html>

<head>
  <title>Wen Jian</title>
    
  <!-- Meta -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Wen Jian">
  <meta name="author" content="Wen Jian">    
  <link rel="shortcut icon" href="favicon.ico"> 
  
  <!-- FontAwesome JS-->
  <script defer src="/static/fontawesome/js/all.min.js"></script>
  
  <!-- Theme CSS -->  
  <link id="theme-style" rel="stylesheet" href="/static/css/theme-2.css">
  <link rel="stylesheet" type="text/css" href="/static/css/custom.css">
  <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-light.min.css">
</head>

<body>
    <header class="header text-center">	    
	    <h1 class="blog-name pt-lg-4 mb-0"><a class="no-text-decoration" href="/">Wen Jian</a></h1>
        
	    <nav class="navbar navbar-expand-lg navbar-dark" >
           
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div id="navigation" class="collapse navbar-collapse flex-column" >
				<div class="profile-section pt-3 pt-lg-0">
				    <img class="profile-image mb-3 rounded-circle mx-auto" src="/static/images/profile.png" alt="image" >			
					
					<div class="bio mb-3">Economist who enjoys using data for social good<br></div><!--//bio-->
					<ul class="social-list list-inline py-3 mx-auto">
			            <li class="list-inline-item"><a href="https://twitter.com/adwenturous"><i class="fab fa-twitter fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://www.linkedin.com/in/wen-jian-48926b32/"><i class="fab fa-linkedin-in fa-fw"></i></a></li>
			            <li class="list-inline-item"><a href="https://github.com/wjivan"><i class="fab fa-github-alt fa-fw"></i></a></li>
			        </ul><!--//social-list-->
			        <hr> 
				</div><!--//profile-section-->
				
          <ul class="navbar-nav flex-column text-start">
            <li class="nav-item">
              <a class="nav-link" href="/"><i class="fas fa-user fa-fw me-2"></i>About Me</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/projects/"><i class="fas fa-laptop fa-fw me-2"></i>Projects</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/blogs/"><i class="fas fa-book fa-fw me-2"></i>Blog</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="mailto:wen.jian@cantab.net"><i class="fas fa-paper-plane fa-fw me-2"></i>Get in touch</a>
            </li>
          </ul>
			  </div>
		</nav>
  </header>
    
    <div class="main-wrapper">
	    
	    <section class="cta-section theme-bg-light py-3">
		    <div class="container text-center single-col-max-width">
			    <h2 class="heading">Economics and data science blog 
            <a href="/blogs/" class="text-decoration-none">üè†</a>
          </h2>
          <!-- Note that tags is defined in app.py as a global-->
		    </div><!--//container-->
	    </section>

      
      <div class="container">
        <div class="row px-5 d-flex justify-content-center">
          <div class="col-8 shadow-sm p-3 mb-5 bg-white rounded text-center">
              <p class="heading-minor"><b>Topics I write about:</b></p>
              
              <a href="/tag/Web%20scraping/" class="btn btn-primary btn-xs" role="button" aria-pressed="true">Web scraping</a>
              
              <a href="/tag/Gender%20inequality/" class="btn btn-primary btn-xs" role="button" aria-pressed="true">Gender inequality</a>
              

              
                <a href="/tag/Python/" class="btn btn-secondary btn-xs" role="button" aria-pressed="true">Python</a>
                
        
          </div>
        </div>
      </div>
      

      <!--Main section that other pages would extend goes here-->
      <div class="container">
      <br>
        
<div class="mb-5">
    <h4>Scraping REPEC website for economics bibliometric data into a database</h4>
    <!-- <div class="meta"><span class="date">2020-01-15</span></div> -->

    
    <div class="block">
        <b><a href="/tag/Web%20scraping/" class="text-decoration-none">Web scraping</a></b>
    </div>
    <!--  |   -->
    
    <div class="block">
        <b><a href="/tag/Python/" class="text-decoration-none">Python</a></b>
    </div>
    <!--   -->
    
</div>

    <div class="blog-post-body pb-5">
        <h1>Introduction to REPEC</h1>
<p>REPEC IDEAS has up to date information on 63,000 economists' publications all around the whole. It is arguably the most powerful source of information on economist activities. However, the REPEC database is difficult to navigate due to archaic formats. As such, I wrote a scraper to help scrape the website for meta data concerning the economists: journal publications, affiliations, location and paper abstracts. </p>
<p>This information will be especially useful in studying collaboration networks and large scale topic modeling of publications.</p>
<h1>Methodology</h1>
<p><img src="/static/pictures/repec/workflow.png">
<br>
The scraper I wrote will gather information on all the personal pages for economists on REPEC from this <a href="https://ideas.repec.org/i/eall.html">summary page</a>. The function below returns a dataframe of all the urls of the economists. </p>
<pre><code>
def get_author_urls(first, last):
    """function that collects urls for authors

    Parameters
    ----------
    first : [string]
        [first author name shown on page e.g. A., Baranov N.]
    last : [string]
        [last author name shown on page e.g. Zhou, Li ]
    page in question is 'https://ideas.repec.org/i/eall.html'

    Returns
    -------
    [pd]
        [dataframe of url links for each economist]
    """
    # Define target website
    url = 'https://ideas.repec.org/i/eall.html'

    # Setup beautiful soup
    page = requests.get(url)
    soup = BeautifulSoup(page.content, 'html.parser')

    # Find all html links
    links = soup.find_all('a', href=True)

    # Filter out only useful links
    url_collection = []
    for i in tqdm(links,desc='Downloading links'):
        author = i.text
        author_url = i['href']
        url_collection.append([author, author_url]) 

    # Get rid of unnecessary links by finding the position of the first and last author
    pos = [idx for idx, results in enumerate(url_collection) if (first in results[0]) or (last in results[0])]
    url_collection = url_collection[min(pos):max(pos)+1]    

    # Some cleaning and get it into a DF
    clean_urls = [reverse_comma(clean_string(u[0])).split(None, 2) + [u[1]] for u in url_collection]
    cleaned = pd.DataFrame(clean_urls, columns=['first_name','middle_name','last_name','partial'])
    cleaned['author_url'] = np.where(cleaned['partial'].isnull(), cleaned['last_name'], cleaned['partial'])
    cleaned['last_name'] = np.where(cleaned['partial'].isnull(), cleaned['middle_name'], cleaned['last_name'])
    cleaned['middle_name'] = np.where(cleaned['partial'].isnull(), None, cleaned['middle_name'])
    cleaned = cleaned.drop(columns=['partial'])
    return cleaned
</code></pre>

<p>The rest of the scraper code will then go down the list and scrape the useful information on each of the personal pages - with downtime so as not to crash the server. </p>
<p>One particularly useful information is the Twitter handle information on economists. This information can be used to query Twitter API for further activities of these economists. There are many academic studies that work on scientific dessemination of ideas and this could be one source of information. </p>
<p>Using this method, I was able to scrape the metadata for 60,000 economists into a database. I can then write SQL scripts to query for any summary statistics I would like for my research. </p>
<p>For the full code, please visit my <a href="https://github.com/wjivan/repec-scraper">github</a> page. </p>
    </div>


      </div>
      
    </div><!--//main-wrapper-->

    <nav class="navfoot py-1">
      <div style="text-align:center;">
        &copy; 2021 |
        &thinsp; <a href="https://www.linkedin.com/in/wen-jian-48926b32/"><i class="fab fa-linkedin fa-lg"></i></a>
        &thinsp; <a href="https://github.com/wjivan"><i class="fab fa-github fa-lg"></i></a> |
      </div>
    </nav>

    <!-- Javascript -->          
    <script src="/static/plugins/popper.min.js"></script> 
    <script src="/static/plugins/bootstrap/js/bootstrap.min.js"></script> 
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

</body>

</html>